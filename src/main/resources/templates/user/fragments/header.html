
    <!-- Header Fragment -->
    <div th:fragment="header">
    <!-- Navbar Start -->
    <div class="container-fluid position-relative nav-bar p-0">
        <div class="container-fluid position-relative p-0" style="z-index: 9;">
            <nav class="navbar navbar-expand-lg navbar-dark shadow-lg py-3" style="background-color: #1e3a8a;">
                <div class="container-fluid px-4">
                    <!-- Logo b√™n tr√°i -->
                    <a href="/" class="navbar-brand">
                        <h3 class="m-0 text-white" style="font-size: 1.5rem;">
                            <i class="fa fa-globe mr-2"></i>TravelWeb
                        </h3>
                    </a>
                    <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarCollapse">
                        <!-- Menu ·ªü gi·ªØa -->
                        <ul class="navbar-nav mx-auto">
                            <li class="nav-item">
                                <a href="/" class="nav-link" th:classappend="${active == 'home'} ? 'active' : ''" style="font-size: 1.1rem; font-weight: 500; color: #ffffff; background: transparent !important;">Trang ch·ªß</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle text-white" data-toggle="dropdown" style="font-size: 1.1rem; font-weight: 500; background: transparent !important;">
                                    <i class="fa fa-map-marked-alt mr-1"></i>Danh m·ª•c tour
                                    <i class="fa fa-chevron-down ml-1" style="font-size: 12px;"></i>
                                </a>
                                <div class="dropdown-menu" style="min-width: 200px; padding: 15px; background-color: #ffffff; border: 2px solid #e3f2fd; box-shadow: 0 8px 25px rgba(0,0,0,0.15);">
                                    <a class="dropdown-item" href="/#domestic-tours" style="padding: 12px 15px; color: #1e3a8a; text-decoration: none; display: block; border-radius: 8px; transition: all 0.3s ease; font-weight: 500; margin-bottom: 5px; border: 1px solid transparent;">
                                        <i class="fa fa-home mr-2" style="color: #007bff;"></i>Tour trong n∆∞·ªõc
                                    </a>
                                    <a class="dropdown-item" href="/#international-tours" style="padding: 12px 15px; color: #1e3a8a; text-decoration: none; display: block; border-radius: 8px; transition: all 0.3s ease; font-weight: 500; border: 1px solid transparent;">
                                        <i class="fa fa-plane mr-2" style="color: #007bff;"></i>Tour ngo√†i n∆∞·ªõc
                                    </a>
                                </div>
                            </li>
                            <li class="nav-item">
                                <a href="/tin-tuc" class="nav-link text-white" th:classappend="${active == 'news'} ? 'active' : ''" style="font-size: 1.1rem; font-weight: 500; background: transparent !important;">Tin t·ª©c</a>
                            </li>

                            <li class="nav-item">
                                <a href="/voucher" class="nav-link text-white" th:classappend="${active == 'voucher'} ? 'active' : ''" style="font-size: 1.1rem; font-weight: 500; background: transparent !important;">Voucher</a>
                            </li>
                            <li class="nav-item">
                                <a href="/about" class="nav-link text-white" th:classappend="${active == 'about'} ? 'active' : ''" style="font-size: 1.1rem; font-weight: 500; background: transparent !important;">V·ªÅ ch√∫ng t√¥i</a>
                            </li>
                        </ul>
                        <!-- T√†i kho·∫£n dropdown ƒë·ªông b√™n ph·∫£i -->
                        <ul class="navbar-nav">
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle text-white" data-toggle="dropdown" style="font-size: 1.1rem; font-weight: 500; background: transparent !important;">
                                    <i class="fa fa-user mr-1"></i>T√†i kho·∫£n
                                    <i class="fa fa-chevron-down ml-1" style="font-size: 12px;"></i>
                                </a>
                                <div class="dropdown-menu" style="min-width: 280px; padding: 20px; background-color: #ffffff; border: 2px solid #e3f2fd; box-shadow: 0 8px 25px rgba(0,0,0,0.15);">
                                    <!-- Ch∆∞a ƒëƒÉng nh·∫≠p -->
                                    <div th:if="${user == null}">
                                        <a href="/register" class="btn btn-primary btn-block mb-3" style="background-color: #1e3a8a; border: none; padding: 12px; font-weight: bold; border-radius: 8px; text-decoration: none; display: block; text-align: center; transition: all 0.3s ease;">
                                            ƒêƒÉng k√Ω
                                        </a>
                                        <p class="text-center mb-0" style="font-size: 14px; color: #333 !important; font-weight: 400;">
                                            Qu√Ω kh√°ch ƒë√£ c√≥ t√†i kho·∫£n? 
                                            <a href="/login" style="color: #007bff !important; text-decoration: underline; font-weight: 500;">ƒêƒÉng nh·∫≠p ngay</a>
                                        </p>
                                    </div>
                                    <!-- ƒê√£ ƒëƒÉng nh·∫≠p -->
                                    <div th:if="${user != null}">
                                        <div class="dropdown-header" style="color: #1e3a8a; font-weight: 600; padding: 8px 0;">
                                            <strong>Xin ch√†o, <span th:text="${user != null ? user.ho_ten : 'User'}">User</span></strong>
                                        </div>
                                        <div class="dropdown-divider" style="border-color: #e3f2fd;"></div>
                                        <a class="dropdown-item" href="/account" style="padding: 10px 15px; color: #1e3a8a; text-decoration: none; display: block; border-radius: 6px; transition: all 0.3s ease; font-weight: 500; margin-bottom: 3px; border: 1px solid transparent;">üë§ Th√¥ng tin t√†i kho·∫£n</a>
                                        <a class="dropdown-item" href="/user/tour" style="padding: 10px 15px; color: #1e3a8a; text-decoration: none; display: block; border-radius: 6px; transition: all 0.3s ease; font-weight: 500; margin-bottom: 3px; border: 1px solid transparent;">üìã L·ªãch s·ª≠ ƒë·∫∑t tour</a>
                                        <a class="dropdown-item" href="/changepassword" style="padding: 10px 15px; color: #1e3a8a; text-decoration: none; display: block; border-radius: 6px; transition: all 0.3s ease; font-weight: 500; margin-bottom: 3px; border: 1px solid transparent;">üîë ƒê·ªïi m·∫≠t kh·∫©u</a>
                                        <div class="dropdown-divider" style="border-color: #e3f2fd;"></div>
                                        <a class="dropdown-item" href="/logout" style="padding: 10px 15px; color: #dc3545; text-decoration: none; display: block; border-radius: 6px; transition: all 0.3s ease; font-weight: 500; border: 1px solid transparent;">üö™ ƒêƒÉng xu·∫•t</a>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
    </div>
    <!-- Navbar End -->
    
    <style>
        /* Navbar improvements */
        .navbar {
            padding: 0.5rem 0;
        }
        
        .navbar-brand h3 {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 0;
        }
        
        .navbar-nav .nav-link {
            padding: 0.75rem 1rem;
            font-weight: 500;
            transition: color 0.3s ease;
            white-space: nowrap;
            background: transparent !important;
        }
        
        .navbar-nav .nav-link:hover {
            color: #2563eb !important;
            background: transparent !important;
        }
        
        .navbar-nav .nav-link.active {
            color: #2563eb !important;
            font-weight: 700;
            background: transparent !important;
        }
        
        /* Layout improvements */
        .navbar-collapse {
            justify-content: space-between !important;
            display: flex !important;
            width: 100%;
            align-items: center !important;
        }
        
        .navbar-nav.mx-auto {
            display: flex !important;
            justify-content: center !important;
            flex: 1 !important;
            margin: 0 auto !important;
            list-style: none !important;
            padding: 0 !important;
        }
        
        .navbar-nav.mx-auto .nav-item {
            margin: 0 0.5rem !important;
        }
        
        .navbar-nav:not(.mx-auto) {
            margin-left: auto !important;
            display: flex !important;
            list-style: none !important;
            padding: 0 !important;
        }
        
        /* Force layout */
        .navbar > .container-fluid {
            display: flex !important;
            align-items: center !important;
            width: 100% !important;
        }
        
        .navbar-brand {
            flex-shrink: 0 !important;
            margin-right: 2rem !important;
        }
        
        /* Ensure proper spacing */
        .navbar-nav .nav-item {
            display: flex !important;
            align-items: center !important;
        }
        
        /* Dropdown positioning */
        .nav-item.dropdown {
            position: relative !important;
        }
        
        .dropdown-menu {
            position: absolute !important;
            right: 0 !important;
            left: auto !important;
            top: 100% !important;
            margin-top: 0.125rem !important;
            z-index: 1000 !important;
            transform: none !important;
        }
        
        /* Ensure dropdown is visible */
        .dropdown-menu.show {
            display: block !important;
            opacity: 1 !important;
            visibility: visible !important;
            transform: none !important;
        }
        
        /* Force dropdown to show when needed */
        .dropdown-menu.show {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
        }
        
        /* Ensure dropdown is not hidden by parent containers */
        .navbar,
        .navbar-collapse,
        .navbar-nav {
            overflow: visible !important;
        }
        
        /* Prevent dropdown from being hidden */
        .navbar {
            overflow: visible !important;
        }
        
        .navbar-collapse {
            overflow: visible !important;
        }
        
        .navbar-nav {
            overflow: visible !important;
        }
        
        /* Dropdown styling */
        .dropdown-menu {
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;
            border: 1px solid rgba(0, 0, 0, 0.1) !important;
            border-radius: 0.375rem !important;
            background-color: white !important;
        }
        
        /* Tour categories dropdown styling */
        .dropdown-item {
            transition: all 0.3s ease !important;
        }
        
        .dropdown-item:hover {
            background-color: #e3f2fd !important;
            color: #1e3a8a !important;
            transform: translateX(5px) !important;
            border-color: #007bff !important;
            box-shadow: 0 2px 8px rgba(0,123,255,0.2) !important;
        }
        
        .dropdown-item i {
            width: 16px !important;
            text-align: center !important;
            transition: all 0.3s ease !important;
        }
        
        .dropdown-item:hover i {
            color: #007bff !important;
            transform: scale(1.1) !important;
        }
        
        /* Account dropdown specific styling */
        .dropdown-menu .dropdown-item:hover {
            background-color: #e3f2fd !important;
            color: #1e3a8a !important;
            transform: translateX(5px) !important;
            border-color: #007bff !important;
            box-shadow: 0 2px 8px rgba(0,123,255,0.2) !important;
        }
        
        /* Special styling for logout button */
        .dropdown-menu .dropdown-item[href="/logout"]:hover {
            background-color: #f8d7da !important;
            color: #dc3545 !important;
            border-color: #dc3545 !important;
            box-shadow: 0 2px 8px rgba(220,53,69,0.2) !important;
        }
        
        /* Responsive adjustments */
        @media (max-width: 991.98px) {
            .navbar-nav {
                text-align: center;
            }
            .navbar-nav .nav-link {
                padding: 0.5rem 1rem;
            }
            .navbar-nav.mx-auto {
                flex: none;
            }
            .dropdown-menu {
                position: static !important;
                float: none !important;
                width: 100% !important;
                margin-top: 0.5rem !important;
                box-shadow: none !important;
                border: 1px solid #dee2e6 !important;
            }
        }
    </style>
    
    <script>
        // ƒê·∫£m b·∫£o dropdown ho·∫°t ƒë·ªông tr√™n t·∫•t c·∫£ trang
        $(document).ready(function() {
            console.log('Header fragment loaded');
            
            // Th√™m event listener cho dropdown toggle
            $(document).on('click', '.dropdown-toggle', function(e) {
                e.preventDefault();
                e.stopPropagation();
                console.log('Dropdown clicked');
                
                var dropdownMenu = $(this).next('.dropdown-menu');
                dropdownMenu.toggleClass('show');
                
                return false;
            });
            
            // ƒê√≥ng dropdown khi click ra ngo√†i
            $(document).on('click', function(e) {
                if (!$(e.target).closest('.dropdown').length) {
                    $('.dropdown-menu').removeClass('show');
                }
            });
            
            // ƒê√≥ng dropdown khi click v√†o link trong dropdown
            $(document).on('click', '.dropdown-menu a', function() {
                $('.dropdown-menu').removeClass('show');
            });
        });
    </script>
    </div>